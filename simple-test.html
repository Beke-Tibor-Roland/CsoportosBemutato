<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Egyszer≈± Teszt</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            background: #0d1117;
            color: #fff;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #viz3 {
            min-height: 600px;
            background: #161b22;
            border-radius: 8px;
            padding: 20px;
        }
        #status {
            background: #1f2937;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üî• V√°logatottak H≈ët√©rk√©p - Egyszer≈± Teszt</h1>
    <div id="viz3"></div>
    <div id="status"></div>

    <script>
        const statusDiv = document.getElementById('status');
        
        function log(msg) {
            console.log(msg);
            statusDiv.innerHTML += msg + '<br>';
        }
        
        log('üöÄ Oldal bet√∂ltve');
        
        function createSimpleHeatmap() {
            log('üìä createSimpleHeatmap kezd√©s...');
            
            const container = d3.select('#viz3');
            container.html('');
            
            log('üìÇ JSON bet√∂lt√©se: data/team_stats.json');
            
            d3.json('data/team_stats.json')
                .then(data => {
                    log('‚úÖ JSON sikeresen bet√∂ltve!');
                    log('üìã Csapatok sz√°ma: ' + Object.keys(data).length);
                    
                    // Konvert√°l√°s t√∂mb√©
                    const teams = Object.values(data)
                        .filter(t => t.total_matches >= 10)
                        .sort((a, b) => b.average_goals_per_match - a.average_goals_per_match)
                        .slice(0, 20); // TOP 20
                    
                    log('üèÜ TOP 20 csapat kiv√°lasztva');
                    
                    // Egyszer≈± lista
                    const list = container.append('div')
                        .style('color', '#fff');
                    
                    list.append('h3').text('TOP 20 V√°logatott (min. 10 meccs)');
                    
                    const ul = list.append('ul');
                    
                    teams.forEach((team, i) => {
                        ul.append('li')
                            .html(`${i+1}. <strong>${team.team_name}</strong>: 
                                   ${team.average_goals_per_match.toFixed(2)} g√≥l/meccs 
                                   (${team.total_matches} meccs, ${team.total_goals} g√≥l)`);
                    });
                    
                    log('‚úÖ Vizualiz√°ci√≥ k√©sz!');
                })
                .catch(error => {
                    log('‚ùå HIBA: ' + error.message);
                    console.error('R√©szletes hiba:', error);
                });
        }
        
        // Futtat√°s
        setTimeout(createSimpleHeatmap, 100);
    </script>
</body>
</html>
