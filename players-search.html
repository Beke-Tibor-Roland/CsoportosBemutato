<!DOCTYPE html>
<html lang="hu" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J√°t√©kos Keres√©s - √âl≈ë Adatok</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark-custom sticky-top">
        <div class="container-fluid px-3">
            <div class="navbar-brand-section">
                <a href="index.html" class="navbar-brand mb-0 h1">‚öΩ LABDAR√öG√ÅS FOGAD√ÅSI ELEMZ√âSEK</a>
            </div>
            <div class="nav-actions">
                <span class="badge bg-success text-white">üî¥ √âL≈ê ADATOK</span>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <aside class="sidebar-left">
            <div class="sidebar-header">
                <a href="index.html" class="btn btn-sm btn-success w-100 mb-2">üè† F≈êOLDAL</a>
            </div>
            
            <div class="leagues-list">
                <div class="section-divider">ELEMZ√âSI OLDALAK</div>
                
                <a href="odds-accuracy.html" class="league-item">
                    <div class="league-country">
                        <span>üìä Odds Pontoss√°g</span>
                    </div>
                </a>
                <a href="margins.html" class="league-item">
                    <div class="league-country">
                        <span>üìà Margin Elemz√©s</span>
                    </div>
                </a>
                <a href="win-rate.html" class="league-item">
                    <div class="league-country">
                        <span>üåç V√°logatottak T√©rk√©p</span>
                    </div>
                </a>
                <a href="strategy.html" class="league-item">
                    <div class="league-country">
                        <span>üí∞ Strat√©gia Szimul√°tor</span>
                    </div>
                </a>
                <a href="odds-trends.html" class="league-item">
                    <div class="league-country">
                        <span>üìâ Odds Trendek</span>
                    </div>
                </a>
                <a href="comparison.html" class="league-item">
                    <div class="league-country">
                        <span>‚öñÔ∏è Liga √ñsszehasonl√≠t√°s</span>
                    </div>
                </a>
                <a href="players-search.html" class="league-item active">
                    <div class="league-country">
                        <span>üîç J√°t√©kos Keres√©s (√âL≈ê)</span>
                    </div>
                </a>
            </div>
        </aside>

        <main class="content-area">
            <div class="data-card">
                <div class="data-card-header">
                    <h4>üîç J√°t√©kos Keres√©s - √âl≈ë API Adatok</h4>
                </div>
                <div class="data-card-body">
                    <div class="analysis-description">
                        <h5>Labdar√∫g√≥k √âl≈ë Keres√©se</h5>
                        <p>
                            Ez az oldal √©l≈ë API adatokat haszn√°l a RapidAPI Free Football Data szolg√°ltat√°s√°t√≥l.
                            Keress j√°t√©kosokat n√©v szerint √©s tekintsd meg r√©szletes inform√°ci√≥ikat.
                        </p>
                        
                        <div class="alert alert-success mt-3 mb-4">
                            <strong>üî¥ √âL≈ê ADATOK</strong> - Az adatok k√∂zvetlen√ºl a RapidAPI-r√≥l √©rkeznek val√≥s id≈ëben!
                        </div>
                    </div>

                    <!-- Keres√©si fel√ºlet -->
                    <div class="search-container mb-4">
                        <div class="row g-3">
                            <div class="col-md-8">
                                <div class="input-group input-group-lg">
                                    <span class="input-group-text bg-dark text-success border-success">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                        </svg>
                                    </span>
                                    <input type="text" 
                                           id="playerSearchInput" 
                                           class="form-control form-control-lg bg-dark text-white border-success" 
                                           placeholder="√çrd be a j√°t√©kos nev√©t (pl. Messi, Ronaldo, Mbapp√©)..."
                                           autocomplete="off">
                                </div>
                                <small class="text-muted">Minimum 2 karakter sz√ºks√©ges a keres√©shez</small>
                            </div>
                            <div class="col-md-4">
                                <button id="searchBtn" class="btn btn-success btn-lg w-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                    </svg>
                                    Keres√©s
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Bet√∂lt√©s jelz≈ë -->
                    <div id="loadingIndicator" class="text-center py-5" style="display: none;">
                        <div class="spinner-border text-success" role="status" style="width: 3rem; height: 3rem;">
                            <span class="visually-hidden">Bet√∂lt√©s...</span>
                        </div>
                        <p class="mt-3 text-success fw-bold">√âl≈ë adatok lek√©rdez√©se...</p>
                    </div>

                    <!-- Hiba √ºzenet -->
                    <div id="errorMessage" class="alert alert-danger" style="display: none;"></div>

                    <!-- Tal√°latok sz√°ma -->
                    <div id="resultCount" class="mb-3" style="display: none;"></div>

                    <!-- Eredm√©nyek -->
                    <div id="playersResults" class="row g-3"></div>

                </div>
            </div>
        </main>

        <aside class="sidebar-right">
            <div class="stats-widget mb-3">
                <div class="widget-simple-header">üìö API Inform√°ci√≥</div>
                <div class="method-content">
                    <h6 style="color: #1cc88a; margin-top: 15px;">üîó Adatforr√°s</h6>
                    <p style="font-size: 13px; color: #858796; margin-bottom: 10px;">
                        <strong>Free API Live Football Data</strong><br>
                        RapidAPI Platform
                    </p>
                    
                    <h6 style="color: #1cc88a; margin-top: 15px;">‚ö° √âl≈ë Adatok</h6>
                    <p style="font-size: 13px; color: #858796; margin-bottom: 10px;">
                        Az adatok val√≥s id≈ëben √©rkeznek az API-r√≥l minden keres√©skor.
                    </p>

                    <h6 style="color: #1cc88a; margin-top: 15px;">üîë API Funkci√≥k</h6>
                    <ul style="font-size: 13px; color: #858796; padding-left: 20px;">
                        <li>J√°t√©kos keres√©s n√©v alapj√°n</li>
                        <li>R√©szletes j√°t√©kos profil</li>
                        <li>Csapat inform√°ci√≥k</li>
                        <li>Poz√≠ci√≥ √©s statisztik√°k</li>
                    </ul>

                    <div class="alert alert-warning mt-3" style="font-size: 12px;">
                        <strong>‚ö†Ô∏è Figyelem:</strong> Az API korl√°tozva lehet a h√≠v√°sok sz√°m√°ban (rate limit).
                    </div>
                </div>
            </div>

            <div class="stats-widget mb-3">
                <div class="widget-simple-header">üí° Haszn√°lati Tippek</div>
                <div class="method-content">
                    <ul style="font-size: 13px; color: #858796; padding-left: 20px;">
                        <li><strong>R√∂vid nevek:</strong> Pr√≥b√°lj r√∂videbb keres√©si kifejez√©seket haszn√°lni</li>
                        <li><strong>Vezet√©kn√©v:</strong> A vezet√©kn√©v √°ltal√°ban pontosabb tal√°latokat ad</li>
                        <li><strong>Kis/nagybet≈±:</strong> Nem sz√°m√≠t a keres√©sben</li>
                        <li><strong>Enter billenty≈±:</strong> Gyorskeres√©shez nyomd meg az Entert</li>
                    </ul>
                </div>
            </div>
        </aside>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Enter billenty≈± kezel√©se
            document.getElementById('playerSearchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('searchBtn').click();
                }
            });

            // Keres√©s gomb
            document.getElementById('searchBtn').addEventListener('click', function() {
                const searchTerm = document.getElementById('playerSearchInput').value.trim();
                if (searchTerm.length >= 2) {
                    searchPlayers(searchTerm);
                } else {
                    showError('K√©rlek adj meg legal√°bb 2 karaktert a keres√©shez!');
                }
            });
        });

        async function searchPlayers(searchTerm) {
            const loadingIndicator = document.getElementById('loadingIndicator');
            const errorMessage = document.getElementById('errorMessage');
            const resultCount = document.getElementById('resultCount');
            const playersResults = document.getElementById('playersResults');

            // UI reset
            loadingIndicator.style.display = 'block';
            errorMessage.style.display = 'none';
            resultCount.style.display = 'none';
            playersResults.innerHTML = '';

            try {
                const response = await fetch(`https://free-api-live-football-data.p.rapidapi.com/football-players-search?search=${encodeURIComponent(searchTerm)}`, {
                    method: 'GET',
                    headers: {
                        'X-Rapidapi-Key': 'b45fdc1f51msheec97557905d95ap131973jsna8c84c280bba',
                        'X-Rapidapi-Host': 'free-api-live-football-data.p.rapidapi.com'
                    }
                });

                loadingIndicator.style.display = 'none';

                if (!response.ok) {
                    throw new Error(`API hiba: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                console.log('API v√°lasz:', data);

                // Ellen≈ërizz√ºk a v√°lasz strukt√∫r√°j√°t
                const players = data.response || data.data || data.players || data;
                
                if (!players || (Array.isArray(players) && players.length === 0)) {
                    showError(`Nincs tal√°lat a(z) "${searchTerm}" keres√©sre. Pr√≥b√°lj m√°s nevet!`);
                    return;
                }

                // Tal√°latok megjelen√≠t√©se
                displayPlayers(Array.isArray(players) ? players : [players], searchTerm);

            } catch (error) {
                loadingIndicator.style.display = 'none';
                console.error('Keres√©si hiba:', error);
                showError(`Hiba t√∂rt√©nt: ${error.message}<br><small>Ellen≈ërizd az internetkapcsolatot vagy az API kulcsot.</small>`);
            }
        }

        function displayPlayers(players, searchTerm) {
            const resultCount = document.getElementById('resultCount');
            const playersResults = document.getElementById('playersResults');

            resultCount.innerHTML = `<div class="alert alert-success"><strong>‚úÖ ${players.length} tal√°lat</strong> a(z) "<em>${searchTerm}</em>" keres√©sre</div>`;
            resultCount.style.display = 'block';

            players.forEach(player => {
                const card = createPlayerCard(player);
                playersResults.innerHTML += card;
            });
        }

        function createPlayerCard(player) {
            // API v√°lasz mez≈ëinek feldolgoz√°sa (rugalmas strukt√∫ra)
            const name = player.name || player.player_name || player.playerName || 'Ismeretlen';
            const team = player.team || player.club || player.current_team || 'N/A';
            const position = player.position || player.pos || 'N/A';
            const nationality = player.nationality || player.country || 'N/A';
            const age = player.age || '';
            const number = player.number || player.shirt_number || '';
            const photo = player.photo || player.image || player.player_image || '';

            return `
                <div class="col-md-6 col-lg-4">
                    <div class="card bg-dark border-success h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                ${photo ? `<img src="${photo}" alt="${name}" class="rounded-circle me-3" style="width: 60px; height: 60px; object-fit: cover; border: 2px solid #1cc88a;">` : '<div class="rounded-circle me-3 bg-secondary d-flex align-items-center justify-content-center" style="width: 60px; height: 60px; border: 2px solid #1cc88a;"><span style="font-size: 24px;">‚öΩ</span></div>'}
                                <div>
                                    <h5 class="card-title mb-1 text-success">${name}</h5>
                                    ${number ? `<span class="badge bg-success">#${number}</span>` : ''}
                                </div>
                            </div>
                            
                            <div class="player-info">
                                <div class="info-row mb-2">
                                    <span class="text-muted">üèüÔ∏è Csapat:</span>
                                    <strong class="text-white">${team}</strong>
                                </div>
                                <div class="info-row mb-2">
                                    <span class="text-muted">üìç Poz√≠ci√≥:</span>
                                    <strong class="text-white">${position}</strong>
                                </div>
                                <div class="info-row mb-2">
                                    <span class="text-muted">üåç Nemzetis√©g:</span>
                                    <strong class="text-white">${nationality}</strong>
                                </div>
                                ${age ? `<div class="info-row mb-2"><span class="text-muted">üéÇ Kor:</span><strong class="text-white">${age} √©v</strong></div>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.innerHTML = message;
            errorMessage.style.display = 'block';
        }
    </script>
</body>
</html>
